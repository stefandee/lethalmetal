echo "Build Process"
echo "-------------"

if [ -z $JAVA_HOME ]; then
    echo "ERROR: JAVA_HOME not found in your environment."
    echo "Please, set the JAVA_HOME variable in your environment to match the location of the Java Virtual Machine you want to use."
    exit 1
fi

if [ -z $NOKIA_HOME ]; then
    echo "ERROR: NOKIA_HOME not found in your environment."
    echo "Please, set the NOKIA_HOME variable in your environment to match the location of the Nokia MDIP SDK you want to use."
    exit 1
fi

ANT_HOME=./dev/ant
ANT_LIB=${ANT_HOME}/lib

#add all jars from lib to JARS
JARS=`find ${ANT_LIB} -name '*jar' | while read JAR_FILE; do \
    echo -n ":$JAR_FILE"; \
done`
LOCALCLASSPATH=${JAVA_HOME}/lib/tools.jar${JARS}

echo "Building with classpath ${LOCALCLASSPATH}"
echo "Starting Ant..."

java -classpath ${LOCALCLASSPATH} org.apache.tools.ant.Main -Dnokia_home.dir=$NOKIA_HOME -buildfile ${ANT_HOME}/xml/build.xml $@